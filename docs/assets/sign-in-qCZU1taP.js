import{i as e,n as t,o as n,r,s as i,t as a}from"./zod-CHCjAJAU.js";import{t as o}from"./useServerFn-DsTzOVMO.js";import{E as s,M as c,S as l,b as u,l as d,n as f,r as p,w as m,x as h}from"./main-nBXvAf8O.js";import"./loader-circle-ay3JJMrH.js";var g=c(s()),_=f({email:p().email(`Please enter a valid email address`),password:p().min(1,`Password is required`)});function v(){let s=l({from:`/_auth/sign-in`}),c=h(),f=m(),p=o(d),v=e({resolver:a(_),defaultValues:{email:``,password:``}}),y=i({mutationFn:async e=>{await p({data:{...e,redirect:s.redirect}})},onSuccess:async()=>{await f.invalidate(),s.redirect&&await c({to:s.redirect})},onError:async e=>{if(e?.status===302||e?.redirect||e?.message?.includes(`redirect`)){await f.invalidate(),s.redirect&&await c({to:s.redirect});return}console.error(`Sign in error:`,e),v.setError(`root`,{message:e.message||`Failed to sign in`})}});return(0,g.jsxs)(n,{title:`Sign in`,description:`Enter your email and password to access your account`,children:[(0,g.jsx)(r,{schema:_,defaultValues:{email:``,password:``},onSubmit:e=>y.mutate(e),submitText:`Sign in`,loadingText:`Signing in...`,isLoading:y.isPending,form:v,children:e=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(t,{control:e.control,name:`email`,label:`Email`,placeholder:`john@doe.com`,type:`email`}),(0,g.jsxs)(`div`,{className:`space-y-2`,children:[(0,g.jsx)(t,{control:e.control,name:`password`,label:`Password`,placeholder:`Enter your password`,type:`password`}),(0,g.jsx)(`div`,{className:`text-right`,children:(0,g.jsx)(u,{to:`/forgot-password`,className:`text-xs md:text-sm text-muted-foreground hover:text-primary underline-offset-4 hover:underline`,children:`Forgot password?`})})]})]})}),(0,g.jsxs)(`div`,{className:`text-center text-sm text-muted-foreground mt-4 space-x-1`,children:[(0,g.jsx)(`div`,{className:`inline-block`,children:`Don't have an account? `}),(0,g.jsx)(`div`,{className:`inline-block`,children:(0,g.jsx)(u,{to:`/sign-up`,search:s.redirect?{redirect:s.redirect}:void 0,className:`font-medium text-primary underline-offset-4 hover:underline`,children:`Sign up`})})]})]})}export{v as component};
//# sourceMappingURL=sign-in-qCZU1taP.js.map