import{j as e}from"./QueryClientProvider-DQQzmD6f.js";import{t}from"./sign-up-RDk4p_7C-ClGgzCwe.js";import"./useMatch-FRFXwByw.js";import"./useLoaderData-dmwlNf3J.js";import{n,t as r}from"./useNavigate-oTHx4_IR.js";import{A as i,P as a,h as o}from"./index-BM_RBz7Q.js";import"./dist-ujpPmBYa.js";import{n as s,r as c}from"./zod-DsoXa-XD.js";import{t as l}from"./useServerFn-D_M3mnTc-xMIRQCHR.js";import{s as u}from"./auth-Dh9yZB3l-B0ENX6BS.js";import{a as d,i as f,n as p,o as m,r as h,t as g}from"./zod-CqBg_A8e.js";var _=a(i()),v=s({email:c().email(`Please enter a valid email address`),password:c().min(8,`Password must be at least 8 characters`)});function y(){let i=n({from:t.id}),a=r(),s=o(),c=l(u),y=m({resolver:g(v),defaultValues:{email:``,password:``}}),b=p({mutationFn:async e=>{await c({data:{...e,redirect:i.redirect}})},onSuccess:async()=>{await s.invalidate(),i.redirect&&await a({to:i.redirect})},onError:async e=>{if(e?.status===302||e?.redirect||e?.message?.includes(`redirect`)){await s.invalidate(),i.redirect&&await a({to:i.redirect});return}console.error(`Sign up error:`,e),y.setError(`root`,{message:e.message||`Failed to sign up`})}});return(0,_.jsxs)(h,{title:`Sign up`,description:`Enter your details to create a new account`,children:[(0,_.jsx)(d,{schema:v,defaultValues:{email:``,password:``},onSubmit:e=>b.mutate(e),submitText:`Sign up`,loadingText:`Signing up...`,isLoading:b.isPending,form:y,children:e=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(f,{control:e.control,name:`email`,label:`Email`,placeholder:`john@doe.com`,type:`email`}),(0,_.jsx)(f,{control:e.control,name:`password`,label:`Password`,placeholder:`Enter your password`,type:`password`})]})}),(0,_.jsxs)(`div`,{className:`text-center text-sm text-muted-foreground mt-4 space-x-1`,children:[(0,_.jsx)(`div`,{className:`inline-block`,children:`Already have an account? `}),(0,_.jsx)(`div`,{className:`inline-block`,children:(0,_.jsx)(e,{to:`/sign-in`,search:i.redirect?{redirect:i.redirect}:void 0,className:`font-medium text-primary underline-offset-4 hover:underline`,children:`Sign in`})})]})]})}export{y as component};