import{i as e,n as t,o as n,r,s as i,t as a}from"./zod-CHCjAJAU.js";import{t as o}from"./useServerFn-DsTzOVMO.js";import{E as s,M as c,S as l,b as u,d,n as f,r as p,t as m,w as h,x as g}from"./main-nBXvAf8O.js";import"./loader-circle-ay3JJMrH.js";var _=c(s()),v=f({email:p().email(`Please enter a valid email address`),password:p().min(8,`Password must be at least 8 characters`)});function y(){let s=l({from:m.id}),c=g(),f=h(),p=o(d),y=e({resolver:a(v),defaultValues:{email:``,password:``}}),b=i({mutationFn:async e=>{await p({data:{...e,redirect:s.redirect}})},onSuccess:async()=>{await f.invalidate(),s.redirect&&await c({to:s.redirect})},onError:async e=>{if(e?.status===302||e?.redirect||e?.message?.includes(`redirect`)){await f.invalidate(),s.redirect&&await c({to:s.redirect});return}console.error(`Sign up error:`,e),y.setError(`root`,{message:e.message||`Failed to sign up`})}});return(0,_.jsxs)(n,{title:`Sign up`,description:`Enter your details to create a new account`,children:[(0,_.jsx)(r,{schema:v,defaultValues:{email:``,password:``},onSubmit:e=>b.mutate(e),submitText:`Sign up`,loadingText:`Signing up...`,isLoading:b.isPending,form:y,children:e=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(t,{control:e.control,name:`email`,label:`Email`,placeholder:`john@doe.com`,type:`email`}),(0,_.jsx)(t,{control:e.control,name:`password`,label:`Password`,placeholder:`Enter your password`,type:`password`})]})}),(0,_.jsxs)(`div`,{className:`text-center text-sm text-muted-foreground mt-4 space-x-1`,children:[(0,_.jsx)(`div`,{className:`inline-block`,children:`Already have an account? `}),(0,_.jsx)(`div`,{className:`inline-block`,children:(0,_.jsx)(u,{to:`/sign-in`,search:s.redirect?{redirect:s.redirect}:void 0,className:`font-medium text-primary underline-offset-4 hover:underline`,children:`Sign in`})})]})]})}export{y as component};
//# sourceMappingURL=sign-up-D7R0OnaA.js.map