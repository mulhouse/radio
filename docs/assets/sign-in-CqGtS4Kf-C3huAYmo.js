import{j as e}from"./QueryClientProvider-DQQzmD6f.js";import"./useMatch-FRFXwByw.js";import{n as t,t as n}from"./useNavigate-oTHx4_IR.js";import{A as r,P as i,h as a}from"./index-BM_RBz7Q.js";import"./dist-ujpPmBYa.js";import{n as o,r as s}from"./zod-DsoXa-XD.js";import{t as c}from"./useServerFn-D_M3mnTc-xMIRQCHR.js";import{a as l}from"./auth-Dh9yZB3l-B0ENX6BS.js";import{a as u,i as d,n as f,o as p,r as m,t as h}from"./zod-CqBg_A8e.js";var g=i(r()),_=o({email:s().email(`Please enter a valid email address`),password:s().min(1,`Password is required`)});function v(){let r=t({from:`/_auth/sign-in`}),i=n(),o=a(),s=c(l),v=p({resolver:h(_),defaultValues:{email:``,password:``}}),y=f({mutationFn:async e=>{await s({data:{...e,redirect:r.redirect}})},onSuccess:async()=>{await o.invalidate(),r.redirect&&await i({to:r.redirect})},onError:async e=>{if(e?.status===302||e?.redirect||e?.message?.includes(`redirect`)){await o.invalidate(),r.redirect&&await i({to:r.redirect});return}console.error(`Sign in error:`,e),v.setError(`root`,{message:e.message||`Failed to sign in`})}});return(0,g.jsxs)(m,{title:`Sign in`,description:`Enter your email and password to access your account`,children:[(0,g.jsx)(u,{schema:_,defaultValues:{email:``,password:``},onSubmit:e=>y.mutate(e),submitText:`Sign in`,loadingText:`Signing in...`,isLoading:y.isPending,form:v,children:t=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d,{control:t.control,name:`email`,label:`Email`,placeholder:`john@doe.com`,type:`email`}),(0,g.jsxs)(`div`,{className:`space-y-2`,children:[(0,g.jsx)(d,{control:t.control,name:`password`,label:`Password`,placeholder:`Enter your password`,type:`password`}),(0,g.jsx)(`div`,{className:`text-right`,children:(0,g.jsx)(e,{to:`/forgot-password`,className:`text-xs md:text-sm text-muted-foreground hover:text-primary underline-offset-4 hover:underline`,children:`Forgot password?`})})]})]})}),(0,g.jsxs)(`div`,{className:`text-center text-sm text-muted-foreground mt-4 space-x-1`,children:[(0,g.jsx)(`div`,{className:`inline-block`,children:`Don't have an account? `}),(0,g.jsx)(`div`,{className:`inline-block`,children:(0,g.jsx)(e,{to:`/sign-up`,search:r.redirect?{redirect:r.redirect}:void 0,className:`font-medium text-primary underline-offset-4 hover:underline`,children:`Sign up`})})]})]})}export{v as component};