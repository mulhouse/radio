{"version":3,"file":"_public-KQCLTocC.js","names":["radioStations: RadioStation[]","radioFranceStations: Record<string, string>","intervalId: NodeJS.Timeout | null","newEntry: HistoryEntry","StationGrid","ControlBar","ListeningHistory","useAudioPlayer","useRadioMetadata","registerServiceWorker","getListeningHistory","clearHistory","RadioStation","useEffect","useState","Route","RadioApp","history","setHistory","currentStation","playbackState","volume","isMuted","error","play","pause","resume","setVolume","toggleMute","retry","metadata","isLoading","metadataLoading","interval","setInterval","clearInterval","handleStationSelect","station","id","handlePlayPause","handleClearHistory","backgroundImage","backgroundSize","component"],"sources":["../../../src/lib/radio-stations.ts","../../../src/components/radio/station-button.tsx","../../../src/components/radio/station-grid.tsx","../../../src/components/radio/metadata-display.tsx","../../../src/components/ui/slider.tsx","../../../src/components/radio/control-bar.tsx","../../../src/components/radio/listening-history.tsx","../../../src/hooks/use-audio-player.ts","../../../src/lib/radio-metadata-api.ts","../../../src/lib/listening-history.ts","../../../src/hooks/use-radio-metadata.ts","../../../src/lib/register-sw.ts","../../../src/routes/_public/index.tsx?tsr-split=component"],"sourcesContent":["export interface RadioStation {\n  id: string\n  name: string\n  streamUrl: string\n  logoUrl: string\n  color: string\n  country: string\n  metadataUrl?: string\n  website?: string\n}\n\nexport const radioStations: RadioStation[] = [\n  {\n    id: 'france-inter',\n    name: 'France Inter',\n    streamUrl: 'https://icecast.radiofrance.fr/franceinter-midfi.mp3',\n    logoUrl:\n      'https://fr.wikipedia.org/wiki/France_Inter#/media/Fichier:France_Inter_logo_2021.svg',\n    color: '#e2001a',\n    country: 'FR',\n    website: 'https://www.radiofrance.fr/franceinter',\n  },\n  {\n    id: 'rtl',\n    name: 'RTL',\n    streamUrl: 'https://icecast.rtl.fr/rtl-1-44-128',\n    logoUrl:\n      'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\"%3E%3Crect fill=\"%23ff6b00\" width=\"200\" height=\"200\"/%3E%3Ctext x=\"50%25\" y=\"50%25\" dominant-baseline=\"middle\" text-anchor=\"middle\" font-family=\"Arial Black\" font-size=\"80\" fill=\"white\" font-weight=\"bold\"%3ERTL%3C/text%3E%3C/svg%3E',\n    color: '#ff6b00',\n    country: 'FR',\n    website: 'https://www.rtl.fr',\n  },\n  {\n    id: 'ici-besancon',\n    name: 'Ici Besançon',\n    streamUrl: 'https://icecast.radiofrance.fr/fbbesancon-midfi.mp3',\n    logoUrl:\n      'https://media.tunedradios.com/w_250,h_250,q_50/static/radio/3394/logo/970ec2b7f7852e329971c212196cfcbb.webp',\n    color: '#0055a4',\n    country: 'FR',\n    website: 'https://www.radiofrance.fr/francebleu/besancon',\n  },\n  {\n    id: 'france-musique',\n    name: 'France Musique',\n    streamUrl: 'https://icecast.radiofrance.fr/francemusique-midfi.mp3',\n    logoUrl:\n      'https://www.radiofrance.fr/s3/cruiser-production/2021/10/4c79241a-547e-4c39-af5e-d3d0ac2d4e67/200x200_francemusique.png',\n    color: '#9b59b6',\n    country: 'FR',\n    website: 'https://www.radiofrance.fr/francemusique',\n  },\n  {\n    id: 'france-culture',\n    name: 'France Culture',\n    streamUrl: 'https://icecast.radiofrance.fr/franceculture-midfi.mp3',\n    logoUrl:\n      'https://www.radiofrance.fr/s3/cruiser-production/2021/10/268c6dca-8acd-4e67-b0e8-6d2d615ad374/200x200_franceculture.png',\n    color: '#8e44ad',\n    country: 'FR',\n    website: 'https://www.radiofrance.fr/franceculture',\n  },\n  {\n    id: 'rts',\n    name: 'RTS',\n    streamUrl: 'https://stream.srg-ssr.ch/m/la-1ere/mp3_128',\n    logoUrl:\n      'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\"%3E%3Crect fill=\"%23d32f2f\" width=\"200\" height=\"200\"/%3E%3Ctext x=\"50%25\" y=\"50%25\" dominant-baseline=\"middle\" text-anchor=\"middle\" font-family=\"Arial Black\" font-size=\"70\" fill=\"white\" font-weight=\"bold\"%3ERTS%3C/text%3E%3C/svg%3E',\n    color: '#d32f2f',\n    country: 'CH',\n    website: 'https://www.rts.ch/audio/la-1ere/',\n  },\n  {\n    id: 'fip',\n    name: 'FIP',\n    streamUrl: 'https://icecast.radiofrance.fr/fip-midfi.mp3',\n    logoUrl:\n      'https://www.radiofrance.fr/s3/cruiser-production/2021/10/5f7f8ecb-4e1f-4b93-9061-0d0d0a1e7e7e/200x200_fip.png',\n    color: '#ff1493',\n    country: 'FR',\n    website: 'https://www.radiofrance.fr/fip',\n  },\n  {\n    id: 'grrif',\n    name: 'GRRIF',\n    streamUrl: 'https://grrif.ice.infomaniak.ch/grrif-128.aac',\n    logoUrl:\n      'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\"%3E%3Crect fill=\"%2300bcd4\" width=\"200\" height=\"200\"/%3E%3Ctext x=\"50%25\" y=\"50%25\" dominant-baseline=\"middle\" text-anchor=\"middle\" font-family=\"Arial Black\" font-size=\"50\" fill=\"white\" font-weight=\"bold\"%3EGRRIF%3C/text%3E%3C/svg%3E',\n    color: '#00bcd4',\n    country: 'CH',\n    website: 'https://www.grrif.ch',\n  },\n  {\n    id: 'canal-b',\n    name: 'Canal B',\n    streamUrl: 'https://stream.levillage.org/canalb',\n    logoUrl:\n      'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\"%3E%3Crect fill=\"%234caf50\" width=\"200\" height=\"200\"/%3E%3Ctext x=\"50%25\" y=\"45%25\" dominant-baseline=\"middle\" text-anchor=\"middle\" font-family=\"Arial Black\" font-size=\"50\" fill=\"white\" font-weight=\"bold\"%3ECanal%3C/text%3E%3Ctext x=\"50%25\" y=\"65%25\" dominant-baseline=\"middle\" text-anchor=\"middle\" font-family=\"Arial Black\" font-size=\"80\" fill=\"white\" font-weight=\"bold\"%3EB%3C/text%3E%3C/svg%3E',\n    color: '#4caf50',\n    country: 'FR',\n    website: 'https://www.canalb.fr',\n  },\n  {\n    id: 'wfmu',\n    name: 'WFMU',\n    streamUrl: 'https://stream0.wfmu.org/freeform-128k',\n    logoUrl:\n      'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\"%3E%3Crect fill=\"%23ffc107\" width=\"200\" height=\"200\"/%3E%3Ctext x=\"50%25\" y=\"50%25\" dominant-baseline=\"middle\" text-anchor=\"middle\" font-family=\"Arial Black\" font-size=\"50\" fill=\"%23000\" font-weight=\"bold\"%3EWFMU%3C/text%3E%3C/svg%3E',\n    color: '#ffc107',\n    country: 'US',\n    website: 'https://wfmu.org',\n  },\n]\n\nexport function getStationById(id: string): RadioStation | undefined {\n  return radioStations.find((station) => station.id === id)\n}\n","import { motion } from 'motion/react'\nimport type { RadioStation } from '@/lib/radio-stations'\nimport { Radio } from 'lucide-react'\nimport { useState } from 'react'\n\ninterface StationButtonProps {\n  station: RadioStation\n  isActive: boolean\n  isPlaying: boolean\n  onClick: () => void\n}\n\nexport function StationButton({\n  station,\n  isActive,\n  isPlaying,\n  onClick,\n}: StationButtonProps) {\n  const [imageError, setImageError] = useState(false)\n\n  return (\n    <motion.button\n      onClick={onClick}\n      className=\"relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-800/50 to-slate-900/50 p-6 backdrop-blur-sm transition-all hover:scale-105 active:scale-95\"\n      style={{\n        boxShadow: isActive\n          ? `0 0 30px ${station.color}40, 0 0 60px ${station.color}20`\n          : '0 4px 20px rgba(0,0,0,0.3)',\n        border: isActive\n          ? `2px solid ${station.color}`\n          : '2px solid transparent',\n      }}\n      whileHover={{ y: -4 }}\n      whileTap={{ scale: 0.95 }}\n    >\n      {/* Animated background gradient */}\n      {isActive && (\n        <motion.div\n          className=\"absolute inset-0 opacity-20\"\n          style={{\n            background: `radial-gradient(circle at center, ${station.color}, transparent)`,\n          }}\n          animate={{\n            scale: [1, 1.2, 1],\n            opacity: [0.2, 0.3, 0.2],\n          }}\n          transition={{\n            duration: 2,\n            repeat: Infinity,\n            ease: 'easeInOut',\n          }}\n        />\n      )}\n\n      {/* Station logo */}\n      <div className=\"relative z-10 flex flex-col items-center gap-4\">\n        <div\n          className=\"relative flex h-24 w-24 items-center justify-center overflow-hidden rounded-xl bg-white/10 p-3 backdrop-blur-sm\"\n          style={{\n            backgroundColor: isActive ? `${station.color}20` : undefined,\n          }}\n        >\n          {/* Pulsing ring for active playing station */}\n          {isActive && isPlaying && (\n            <motion.div\n              className=\"absolute inset-0 rounded-xl\"\n              style={{\n                border: `2px solid ${station.color}`,\n              }}\n              animate={{\n                scale: [1, 1.1, 1],\n                opacity: [0.5, 0.8, 0.5],\n              }}\n              transition={{\n                duration: 1.5,\n                repeat: Infinity,\n                ease: 'easeInOut',\n              }}\n            />\n          )}\n\n          {!imageError ? (\n            <img\n              src={station.logoUrl}\n              alt={station.name}\n              className=\"h-full w-full object-contain\"\n              crossOrigin=\"anonymous\"\n              onError={() => {\n                console.warn(`Failed to load logo for ${station.name}`)\n                setImageError(true)\n              }}\n            />\n          ) : (\n            <Radio className=\"h-12 w-12 text-white\" />\n          )}\n        </div>\n\n        {/* Station name */}\n        <div className=\"text-center\">\n          <h3\n            className=\"font-display text-xl font-bold uppercase tracking-wider\"\n            style={{\n              color: isActive ? station.color : '#ffffff',\n              textShadow: isActive ? `0 0 20px ${station.color}80` : 'none',\n            }}\n          >\n            {station.name}\n          </h3>\n\n          {/* Playing indicator */}\n          {isActive && isPlaying && (\n            <motion.div\n              className=\"mt-2 flex items-center justify-center gap-1\"\n              initial={{ opacity: 0, y: -10 }}\n              animate={{ opacity: 1, y: 0 }}\n            >\n              <Radio className=\"h-3 w-3\" style={{ color: station.color }} />\n              <span\n                className=\"text-xs font-medium uppercase tracking-wide\"\n                style={{ color: station.color }}\n              >\n                En direct\n              </span>\n            </motion.div>\n          )}\n        </div>\n      </div>\n\n      {/* Corner accent */}\n      {isActive && (\n        <motion.div\n          className=\"absolute right-0 top-0 h-16 w-16\"\n          style={{\n            background: `radial-gradient(circle at top right, ${station.color}40, transparent)`,\n          }}\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n        />\n      )}\n    </motion.button>\n  )\n}\n","import { radioStations } from '@/lib/radio-stations'\nimport { StationButton } from './station-button'\nimport type { RadioStation } from '@/lib/radio-stations'\n\ninterface StationGridProps {\n  currentStation: RadioStation | null\n  isPlaying: boolean\n  onStationSelect: (station: RadioStation) => void\n}\n\nexport function StationGrid({\n  currentStation,\n  isPlaying,\n  onStationSelect,\n}: StationGridProps) {\n  return (\n    <div className=\"w-full\">\n      <div className=\"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5\">\n        {radioStations.map((station) => (\n          <StationButton\n            key={station.id}\n            station={station}\n            isActive={currentStation?.id === station.id}\n            isPlaying={isPlaying}\n            onClick={() => onStationSelect(station)}\n          />\n        ))}\n      </div>\n    </div>\n  )\n}\n","import { motion, AnimatePresence } from 'motion/react'\nimport type { TrackMetadata } from '@/lib/radio-metadata-api'\nimport { Music2, Disc3 } from 'lucide-react'\n\ninterface MetadataDisplayProps {\n  metadata: TrackMetadata | null\n  isLoading: boolean\n  stationColor: string\n}\n\nexport function MetadataDisplay({\n  metadata,\n  isLoading,\n  stationColor,\n}: MetadataDisplayProps) {\n  if (isLoading && !metadata) {\n    return (\n      <div className=\"flex items-center gap-2 text-sm text-slate-400\">\n        <motion.div\n          animate={{ rotate: 360 }}\n          transition={{ duration: 2, repeat: Infinity, ease: 'linear' }}\n        >\n          <Disc3 className=\"h-4 w-4\" />\n        </motion.div>\n        <span>Chargement des informations...</span>\n      </div>\n    )\n  }\n\n  if (!metadata || (!metadata.title && !metadata.show)) {\n    return (\n      <div className=\"flex items-center gap-2 text-sm text-slate-400\">\n        <Music2 className=\"h-4 w-4\" />\n        <span>En direct</span>\n      </div>\n    )\n  }\n\n  const hasValidTrack = metadata.title && metadata.title !== 'En direct'\n\n  return (\n    <AnimatePresence mode=\"wait\">\n      <motion.div\n        key={`${metadata.title}-${metadata.artist}-${metadata.show}`}\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        exit={{ opacity: 0, y: -10 }}\n        transition={{ duration: 0.3 }}\n        className=\"flex flex-col gap-1\"\n      >\n        {/* Show name */}\n        {metadata.show && (\n          <div className=\"flex items-center gap-2\">\n            <div\n              className=\"h-1 w-1 rounded-full\"\n              style={{ backgroundColor: stationColor }}\n            />\n            <span className=\"text-xs font-medium uppercase tracking-wide text-slate-400\">\n              {metadata.show}\n            </span>\n          </div>\n        )}\n\n        {/* Track info */}\n        {hasValidTrack && (\n          <div className=\"flex items-start gap-3\">\n            {/* Cover art */}\n            {metadata.coverArt && (\n              <motion.img\n                src={metadata.coverArt}\n                alt=\"Cover\"\n                className=\"h-12 w-12 rounded-lg object-cover shadow-lg\"\n                initial={{ scale: 0.8, opacity: 0 }}\n                animate={{ scale: 1, opacity: 1 }}\n                transition={{ duration: 0.3 }}\n                onError={(e) => {\n                  // Hide image if it fails to load\n                  const target = e.target as HTMLImageElement\n                  target.style.display = 'none'\n                }}\n              />\n            )}\n\n            {/* Title and artist */}\n            <div className=\"flex-1 min-w-0\">\n              {metadata.title && (\n                <p\n                  className=\"truncate font-semibold text-white\"\n                  style={{\n                    textShadow: `0 0 10px ${stationColor}40`,\n                  }}\n                >\n                  {metadata.title}\n                </p>\n              )}\n              {metadata.artist && (\n                <p className=\"truncate text-sm text-slate-300\">\n                  {metadata.artist}\n                </p>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Fallback if only show is available */}\n        {!hasValidTrack && metadata.show && (\n          <div className=\"flex items-center gap-2 text-sm text-slate-300\">\n            <Music2 className=\"h-4 w-4\" />\n            <span>En direct</span>\n          </div>\n        )}\n      </motion.div>\n    </AnimatePresence>\n  )\n}\n","'use client'\n\nimport * as React from 'react'\nimport * as SliderPrimitive from '@radix-ui/react-slider'\n\nimport { cn } from '@/lib/utils'\n\nfunction Slider({\n  className,\n  defaultValue,\n  value,\n  min = 0,\n  max = 100,\n  ...props\n}: React.ComponentProps<typeof SliderPrimitive.Root>) {\n  const _values = React.useMemo(\n    () =>\n      Array.isArray(value)\n        ? value\n        : Array.isArray(defaultValue)\n          ? defaultValue\n          : [min, max],\n    [value, defaultValue, min, max],\n  )\n\n  return (\n    <SliderPrimitive.Root\n      data-slot=\"slider\"\n      defaultValue={defaultValue}\n      value={value}\n      min={min}\n      max={max}\n      className={cn(\n        'relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col',\n        className,\n      )}\n      {...props}\n    >\n      <SliderPrimitive.Track\n        data-slot=\"slider-track\"\n        className={cn(\n          'bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5',\n        )}\n      >\n        <SliderPrimitive.Range\n          data-slot=\"slider-range\"\n          className={cn(\n            'bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full',\n          )}\n        />\n      </SliderPrimitive.Track>\n      {Array.from({ length: _values.length }, (_, index) => (\n        <SliderPrimitive.Thumb\n          data-slot=\"slider-thumb\"\n          key={index}\n          className=\"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50\"\n        />\n      ))}\n    </SliderPrimitive.Root>\n  )\n}\n\nexport { Slider }\n","import { motion } from 'motion/react'\nimport {\n  Play,\n  Pause,\n  Volume2,\n  VolumeX,\n  Loader2,\n  AlertCircle,\n  RotateCcw,\n} from 'lucide-react'\nimport { MetadataDisplay } from './metadata-display'\nimport type { RadioStation } from '@/lib/radio-stations'\nimport type { TrackMetadata } from '@/lib/radio-metadata-api'\nimport type { PlaybackState } from '@/hooks/use-audio-player'\nimport { Slider } from '@/components/ui/slider'\n\ninterface ControlBarProps {\n  station: RadioStation | null\n  playbackState: PlaybackState\n  volume: number\n  isMuted: boolean\n  metadata: TrackMetadata | null\n  metadataLoading: boolean\n  error: string | null\n  onPlayPause: () => void\n  onVolumeChange: (volume: number) => void\n  onToggleMute: () => void\n  onRetry: () => void\n}\n\nexport function ControlBar({\n  station,\n  playbackState,\n  volume,\n  isMuted,\n  metadata,\n  metadataLoading,\n  error,\n  onPlayPause,\n  onVolumeChange,\n  onToggleMute,\n  onRetry,\n}: ControlBarProps) {\n  const isPlaying = playbackState === 'playing'\n  const isLoading = playbackState === 'loading'\n  const hasError = playbackState === 'error'\n\n  return (\n    <motion.div\n      className=\"fixed bottom-0 left-0 right-0 z-50 border-t border-slate-700/50 bg-gradient-to-t from-slate-950 via-slate-900 to-slate-900/95 backdrop-blur-xl\"\n      initial={{ y: 100 }}\n      animate={{ y: 0 }}\n      transition={{ type: 'spring', damping: 25, stiffness: 200 }}\n    >\n      {/* Error banner */}\n      {hasError && error && (\n        <motion.div\n          className=\"flex items-center justify-between gap-3 border-b border-red-500/20 bg-red-950/30 px-4 py-2 text-sm\"\n          initial={{ opacity: 0, height: 0 }}\n          animate={{ opacity: 1, height: 'auto' }}\n        >\n          <div className=\"flex items-center gap-2 text-red-400\">\n            <AlertCircle className=\"h-4 w-4\" />\n            <span>{error}</span>\n          </div>\n          <button\n            onClick={onRetry}\n            className=\"flex items-center gap-1 rounded-lg bg-red-500/20 px-3 py-1 text-xs font-medium text-red-300 transition-colors hover:bg-red-500/30\"\n          >\n            <RotateCcw className=\"h-3 w-3\" />\n            Réessayer\n          </button>\n        </motion.div>\n      )}\n\n      <div className=\"mx-auto max-w-7xl px-4 py-4\">\n        <div className=\"flex items-center gap-6\">\n          {/* Station info and metadata */}\n          <div className=\"flex-1 min-w-0\">\n            {station ? (\n              <div className=\"flex items-center gap-4\">\n                {/* Station logo */}\n                <div\n                  className=\"relative flex h-16 w-16 flex-shrink-0 items-center justify-center overflow-hidden rounded-xl bg-white/5 p-2 backdrop-blur-sm\"\n                  style={{\n                    boxShadow: isPlaying\n                      ? `0 0 20px ${station.color}40`\n                      : 'none',\n                  }}\n                >\n                  <img\n                    src={station.logoUrl}\n                    alt={station.name}\n                    className=\"h-full w-full object-contain\"\n                  />\n                  {isPlaying && (\n                    <motion.div\n                      className=\"absolute inset-0 rounded-xl\"\n                      style={{ border: `2px solid ${station.color}` }}\n                      animate={{\n                        opacity: [0.3, 0.6, 0.3],\n                      }}\n                      transition={{\n                        duration: 2,\n                        repeat: Infinity,\n                        ease: 'easeInOut',\n                      }}\n                    />\n                  )}\n                </div>\n\n                {/* Station name and metadata */}\n                <div className=\"flex-1 min-w-0\">\n                  <h2\n                    className=\"mb-1 font-display text-lg font-bold uppercase tracking-wide\"\n                    style={{\n                      color: station.color,\n                      textShadow: `0 0 15px ${station.color}60`,\n                    }}\n                  >\n                    {station.name}\n                  </h2>\n                  <MetadataDisplay\n                    metadata={metadata}\n                    isLoading={metadataLoading}\n                    stationColor={station.color}\n                  />\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-slate-400\">\n                <p className=\"font-display text-lg font-bold uppercase tracking-wide\">\n                  Sélectionnez une station\n                </p>\n                <p className=\"text-sm\">Choisissez une radio pour commencer</p>\n              </div>\n            )}\n          </div>\n\n          {/* Playback controls */}\n          <div className=\"flex items-center gap-4\">\n            {/* Play/Pause button */}\n            <motion.button\n              onClick={onPlayPause}\n              disabled={!station || isLoading}\n              className=\"relative flex h-14 w-14 items-center justify-center rounded-full bg-gradient-to-br from-slate-700 to-slate-800 shadow-lg transition-all hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed\"\n              style={{\n                boxShadow:\n                  station && isPlaying\n                    ? `0 0 30px ${station.color}60, 0 4px 20px rgba(0,0,0,0.4)`\n                    : '0 4px 20px rgba(0,0,0,0.4)',\n              }}\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n            >\n              {isLoading ? (\n                <Loader2 className=\"h-6 w-6 animate-spin text-white\" />\n              ) : isPlaying ? (\n                <Pause\n                  className=\"h-6 w-6\"\n                  style={{ color: station?.color || '#ffffff' }}\n                />\n              ) : (\n                <Play\n                  className=\"h-6 w-6\"\n                  style={{ color: station?.color || '#ffffff' }}\n                />\n              )}\n\n              {/* Pulsing ring for playing state */}\n              {isPlaying && station && (\n                <motion.div\n                  className=\"absolute inset-0 rounded-full\"\n                  style={{ border: `2px solid ${station.color}` }}\n                  animate={{\n                    scale: [1, 1.2, 1],\n                    opacity: [0.5, 0, 0.5],\n                  }}\n                  transition={{\n                    duration: 2,\n                    repeat: Infinity,\n                    ease: 'easeInOut',\n                  }}\n                />\n              )}\n            </motion.button>\n\n            {/* Volume controls */}\n            <div className=\"hidden sm:flex items-center gap-3\">\n              <button\n                onClick={onToggleMute}\n                className=\"text-slate-400 transition-colors hover:text-white\"\n              >\n                {isMuted ? (\n                  <VolumeX className=\"h-5 w-5\" />\n                ) : (\n                  <Volume2 className=\"h-5 w-5\" />\n                )}\n              </button>\n\n              <Slider\n                value={[isMuted ? 0 : volume * 100]}\n                onValueChange={(values) => onVolumeChange(values[0] / 100)}\n                max={100}\n                step={1}\n                className=\"w-24\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Bottom glow effect */}\n      {station && isPlaying && (\n        <div\n          className=\"absolute bottom-0 left-0 right-0 h-1\"\n          style={{\n            background: `linear-gradient(to right, transparent, ${station.color}, transparent)`,\n            boxShadow: `0 0 20px ${station.color}80`,\n          }}\n        />\n      )}\n    </motion.div>\n  )\n}\n","import { motion, AnimatePresence } from 'motion/react'\nimport { Clock, Trash2, Music2 } from 'lucide-react'\nimport type { HistoryEntry } from '@/lib/listening-history'\nimport { formatDistanceToNow } from 'date-fns'\nimport { fr } from 'date-fns/locale'\n\ninterface ListeningHistoryProps {\n  history: HistoryEntry[]\n  onClear: () => void\n}\n\nexport function ListeningHistory({ history, onClear }: ListeningHistoryProps) {\n  if (history.length === 0) {\n    return (\n      <div className=\"rounded-2xl border border-slate-800/50 bg-slate-900/30 p-8 text-center backdrop-blur-sm\">\n        <Music2 className=\"mx-auto mb-3 h-12 w-12 text-slate-600\" />\n        <p className=\"text-slate-400\">Aucun historique d'écoute</p>\n        <p className=\"mt-1 text-sm text-slate-500\">\n          Les titres que vous écoutez apparaîtront ici\n        </p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"rounded-2xl border border-slate-800/50 bg-slate-900/30 backdrop-blur-sm\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between border-b border-slate-800/50 p-4\">\n        <div className=\"flex items-center gap-2\">\n          <Clock className=\"h-5 w-5 text-slate-400\" />\n          <h3 className=\"font-display text-lg font-bold uppercase tracking-wide text-white\">\n            Historique d'écoute\n          </h3>\n          <span className=\"rounded-full bg-slate-800 px-2 py-0.5 text-xs font-medium text-slate-300\">\n            {history.length}\n          </span>\n        </div>\n        <button\n          onClick={onClear}\n          className=\"flex items-center gap-1 rounded-lg bg-red-500/10 px-3 py-1.5 text-xs font-medium text-red-400 transition-colors hover:bg-red-500/20\"\n        >\n          <Trash2 className=\"h-3 w-3\" />\n          Effacer\n        </button>\n      </div>\n\n      {/* History list */}\n      <div className=\"max-h-96 overflow-y-auto\">\n        <AnimatePresence mode=\"popLayout\">\n          {history.map((entry, index) => (\n            <motion.div\n              key={entry.id}\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: 20 }}\n              transition={{ delay: index * 0.05 }}\n              className=\"border-b border-slate-800/30 p-4 transition-colors hover:bg-slate-800/20\"\n            >\n              <div className=\"flex items-start gap-3\">\n                {/* Cover art or placeholder */}\n                {entry.metadata.coverArt ? (\n                  <img\n                    src={entry.metadata.coverArt}\n                    alt=\"Cover\"\n                    className=\"h-12 w-12 flex-shrink-0 rounded-lg object-cover shadow-md\"\n                  />\n                ) : (\n                  <div\n                    className=\"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg\"\n                    style={{ backgroundColor: `${entry.stationColor}20` }}\n                  >\n                    <Music2\n                      className=\"h-6 w-6\"\n                      style={{ color: entry.stationColor }}\n                    />\n                  </div>\n                )}\n\n                {/* Track info */}\n                <div className=\"min-w-0 flex-1\">\n                  <p className=\"truncate font-semibold text-white\">\n                    {entry.metadata.title}\n                  </p>\n                  {entry.metadata.artist && (\n                    <p className=\"truncate text-sm text-slate-300\">\n                      {entry.metadata.artist}\n                    </p>\n                  )}\n                  <div className=\"mt-1 flex items-center gap-2 text-xs text-slate-500\">\n                    <span\n                      className=\"font-medium\"\n                      style={{ color: entry.stationColor }}\n                    >\n                      {entry.stationName}\n                    </span>\n                    <span>•</span>\n                    <span>\n                      {formatDistanceToNow(entry.timestamp, {\n                        addSuffix: true,\n                        locale: fr,\n                      })}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          ))}\n        </AnimatePresence>\n      </div>\n    </div>\n  )\n}\n","import { useState, useEffect, useRef, useCallback } from 'react'\nimport type { RadioStation } from '@/lib/radio-stations'\n\nexport type PlaybackState = 'idle' | 'loading' | 'playing' | 'paused' | 'error'\n\nexport interface AudioPlayerState {\n  currentStation: RadioStation | null\n  playbackState: PlaybackState\n  volume: number\n  isMuted: boolean\n  error: string | null\n}\n\nexport interface AudioPlayerActions {\n  play: (station: RadioStation) => Promise<void>\n  pause: () => void\n  resume: () => void\n  stop: () => void\n  setVolume: (volume: number) => void\n  toggleMute: () => void\n  retry: () => Promise<void>\n}\n\nexport function useAudioPlayer(): AudioPlayerState & AudioPlayerActions {\n  const audioRef = useRef<HTMLAudioElement | null>(null)\n  const [currentStation, setCurrentStation] = useState<RadioStation | null>(\n    null,\n  )\n  const [playbackState, setPlaybackState] = useState<PlaybackState>('idle')\n  const [volume, setVolumeState] = useState<number>(() => {\n    const saved = localStorage.getItem('radio-volume')\n    return saved ? parseFloat(saved) : 0.7\n  })\n  const [isMuted, setIsMuted] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  // Initialize audio element\n  useEffect(() => {\n    const audio = new Audio()\n    audio.preload = 'none'\n    audio.volume = volume\n    audioRef.current = audio\n\n    // Set up media session for background playback\n    if ('mediaSession' in navigator) {\n      navigator.mediaSession.setActionHandler('play', () => {\n        void audio.play()\n      })\n      navigator.mediaSession.setActionHandler('pause', () => {\n        audio.pause()\n      })\n      navigator.mediaSession.setActionHandler('stop', () => {\n        audio.pause()\n        audio.currentTime = 0\n      })\n    }\n\n    return () => {\n      audio.pause()\n      audio.src = ''\n    }\n  }, [])\n\n  // Update audio volume\n  useEffect(() => {\n    if (audioRef.current) {\n      audioRef.current.volume = isMuted ? 0 : volume\n    }\n  }, [volume, isMuted])\n\n  // Set up audio event listeners\n  useEffect(() => {\n    const audio = audioRef.current\n    if (!audio) return\n\n    const handleCanPlay = () => {\n      setPlaybackState('playing')\n      setError(null)\n    }\n\n    const handlePlaying = () => {\n      setPlaybackState('playing')\n      setError(null)\n    }\n\n    const handlePause = () => {\n      if (playbackState !== 'loading') {\n        setPlaybackState('paused')\n      }\n    }\n\n    const handleWaiting = () => {\n      setPlaybackState('loading')\n    }\n\n    const handleError = (e: Event) => {\n      console.error('Audio error:', e)\n      const audioError = (e.target as HTMLAudioElement).error\n\n      let errorMessage = 'Erreur de lecture'\n      if (audioError) {\n        switch (audioError.code) {\n          case MediaError.MEDIA_ERR_ABORTED:\n            errorMessage = 'Lecture interrompue'\n            break\n          case MediaError.MEDIA_ERR_NETWORK:\n            errorMessage = 'Erreur réseau - Vérifiez votre connexion'\n            break\n          case MediaError.MEDIA_ERR_DECODE:\n            errorMessage = 'Erreur de décodage du flux'\n            break\n          case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:\n            errorMessage = 'Format de flux non supporté'\n            break\n        }\n      }\n\n      setPlaybackState('error')\n      setError(errorMessage)\n    }\n\n    const handleStalled = () => {\n      setError('Connexion lente - Mise en mémoire tampon...')\n    }\n\n    audio.addEventListener('canplay', handleCanPlay)\n    audio.addEventListener('playing', handlePlaying)\n    audio.addEventListener('pause', handlePause)\n    audio.addEventListener('waiting', handleWaiting)\n    audio.addEventListener('error', handleError)\n    audio.addEventListener('stalled', handleStalled)\n\n    return () => {\n      audio.removeEventListener('canplay', handleCanPlay)\n      audio.removeEventListener('playing', handlePlaying)\n      audio.removeEventListener('pause', handlePause)\n      audio.removeEventListener('waiting', handleWaiting)\n      audio.removeEventListener('error', handleError)\n      audio.removeEventListener('stalled', handleStalled)\n    }\n  }, [playbackState])\n\n  const play = useCallback(async (station: RadioStation) => {\n    const audio = audioRef.current\n    if (!audio) return\n\n    try {\n      setPlaybackState('loading')\n      setError(null)\n      setCurrentStation(station)\n\n      // Stop current playback\n      audio.pause()\n      audio.src = ''\n\n      // Load new stream\n      audio.src = station.streamUrl\n      audio.load()\n\n      // Update media session metadata\n      if ('mediaSession' in navigator) {\n        navigator.mediaSession.metadata = new MediaMetadata({\n          title: station.name,\n          artist: 'Radio en direct',\n          artwork: [\n            {\n              src: station.logoUrl,\n              sizes: '512x512',\n              type: 'image/png',\n            },\n          ],\n        })\n      }\n\n      // Start playback\n      await audio.play()\n\n      // Save last played station\n      localStorage.setItem('last-station', station.id)\n    } catch (err) {\n      console.error('Play error:', err)\n      setPlaybackState('error')\n      setError('Impossible de lire cette station - Vérifiez votre connexion')\n    }\n  }, [])\n\n  const pause = useCallback(() => {\n    const audio = audioRef.current\n    if (audio && playbackState === 'playing') {\n      audio.pause()\n      setPlaybackState('paused')\n    }\n  }, [playbackState])\n\n  const resume = useCallback(async () => {\n    const audio = audioRef.current\n    if (audio && playbackState === 'paused') {\n      try {\n        await audio.play()\n        setPlaybackState('playing')\n      } catch (err) {\n        console.error('Resume error:', err)\n        setPlaybackState('error')\n        setError('Impossible de reprendre la lecture')\n      }\n    }\n  }, [playbackState])\n\n  const stop = useCallback(() => {\n    const audio = audioRef.current\n    if (audio) {\n      audio.pause()\n      audio.src = ''\n      setPlaybackState('idle')\n      setCurrentStation(null)\n      setError(null)\n    }\n  }, [])\n\n  const setVolume = useCallback((newVolume: number) => {\n    const clampedVolume = Math.max(0, Math.min(1, newVolume))\n    setVolumeState(clampedVolume)\n    localStorage.setItem('radio-volume', clampedVolume.toString())\n  }, [])\n\n  const toggleMute = useCallback(() => {\n    setIsMuted((prev) => !prev)\n  }, [])\n\n  const retry = useCallback(async () => {\n    if (currentStation) {\n      await play(currentStation)\n    }\n  }, [currentStation, play])\n\n  return {\n    currentStation,\n    playbackState,\n    volume,\n    isMuted,\n    error,\n    play,\n    pause,\n    resume,\n    stop,\n    setVolume,\n    toggleMute,\n    retry,\n  }\n}\n","export interface TrackMetadata {\n  title?: string\n  artist?: string\n  show?: string\n  album?: string\n  coverArt?: string\n  startTime?: string\n}\n\n/**\n * Fetch metadata for Radio France stations (France Inter, France Musique, France Culture, FIP, etc.)\n */\nasync function fetchRadioFranceMetadata(\n  stationId: string,\n): Promise<TrackMetadata | null> {\n  try {\n    const response = await fetch(\n      `https://www.radiofrance.fr/api/v2.1/stations/${stationId}/live`,\n      {\n        mode: 'cors',\n        headers: {\n          Accept: 'application/json',\n        },\n      },\n    )\n    if (!response.ok) {\n      console.warn(\n        `Radio France API returned ${response.status} for ${stationId}`,\n      )\n      return null\n    }\n\n    const data = await response.json()\n    const now = data?.now\n\n    if (!now) {\n      return {\n        title: 'En direct',\n        artist: '',\n        show: '',\n      }\n    }\n\n    return {\n      title:\n        now?.secondLine || now?.song?.title || now?.firstLine || 'En direct',\n      artist: now?.firstLine || now?.song?.interpreters?.[0] || '',\n      show: now?.show?.title || '',\n      coverArt: now?.song?.cover || now?.show?.visual || undefined,\n      startTime: now?.startTime,\n    }\n  } catch (error) {\n    console.error('Radio France metadata error:', error)\n    return {\n      title: 'En direct',\n      artist: '',\n      show: '',\n    }\n  }\n}\n\n/**\n * Main metadata fetcher - routes to appropriate API based on station\n */\nexport async function fetchStationMetadata(\n  stationId: string,\n): Promise<TrackMetadata | null> {\n  // Radio France stations - use their official API\n  const radioFranceStations: Record<string, string> = {\n    'france-inter': 'franceinter',\n    'france-musique': 'francemusique',\n    'france-culture': 'franceculture',\n    fip: 'fip',\n    'ici-besancon': 'fbbesancon',\n  }\n\n  if (radioFranceStations[stationId]) {\n    return fetchRadioFranceMetadata(radioFranceStations[stationId])\n  }\n\n  // For other stations, return basic info\n  return {\n    title: 'En direct',\n    artist: '',\n    show: '',\n  }\n}\n\n/**\n * Poll metadata at regular intervals\n */\nexport function createMetadataPoller(\n  stationId: string,\n  onUpdate: (metadata: TrackMetadata | null) => void,\n  intervalMs: number = 15000,\n): () => void {\n  let intervalId: NodeJS.Timeout | null = null\n\n  const poll = async () => {\n    const metadata = await fetchStationMetadata(stationId)\n    onUpdate(metadata)\n  }\n\n  // Initial fetch\n  void poll()\n\n  // Set up polling\n  intervalId = setInterval(poll, intervalMs)\n\n  // Return cleanup function\n  return () => {\n    if (intervalId) {\n      clearInterval(intervalId)\n    }\n  }\n}\n","import type { TrackMetadata } from './radio-metadata-api'\n\nexport interface HistoryEntry {\n  id: string\n  stationId: string\n  stationName: string\n  stationColor: string\n  metadata: TrackMetadata\n  timestamp: number\n}\n\nconst HISTORY_KEY = 'radio-listening-history'\nconst MAX_HISTORY_ITEMS = 10\n\n/**\n * Get listening history from localStorage\n */\nexport function getListeningHistory(): HistoryEntry[] {\n  try {\n    const stored = localStorage.getItem(HISTORY_KEY)\n    if (!stored) return []\n    return JSON.parse(stored) as HistoryEntry[]\n  } catch (error) {\n    console.error('Failed to load listening history:', error)\n    return []\n  }\n}\n\n/**\n * Add a track to listening history\n */\nexport function addToHistory(\n  stationId: string,\n  stationName: string,\n  stationColor: string,\n  metadata: TrackMetadata,\n): void {\n  // Don't add if there's no meaningful metadata\n  if (!metadata.title || metadata.title === 'En direct') {\n    return\n  }\n\n  const history = getListeningHistory()\n\n  // Create new entry\n  const newEntry: HistoryEntry = {\n    id: `${stationId}-${Date.now()}`,\n    stationId,\n    stationName,\n    stationColor,\n    metadata,\n    timestamp: Date.now(),\n  }\n\n  // Check if the last entry is the same track (avoid duplicates)\n  const lastEntry = history[0]\n  if (\n    lastEntry &&\n    lastEntry.stationId === stationId &&\n    lastEntry.metadata.title === metadata.title &&\n    lastEntry.metadata.artist === metadata.artist\n  ) {\n    return\n  }\n\n  // Add to beginning and limit to MAX_HISTORY_ITEMS\n  const updatedHistory = [newEntry, ...history].slice(0, MAX_HISTORY_ITEMS)\n\n  try {\n    localStorage.setItem(HISTORY_KEY, JSON.stringify(updatedHistory))\n  } catch (error) {\n    console.error('Failed to save listening history:', error)\n  }\n}\n\n/**\n * Clear listening history\n */\nexport function clearHistory(): void {\n  try {\n    localStorage.removeItem(HISTORY_KEY)\n  } catch (error) {\n    console.error('Failed to clear listening history:', error)\n  }\n}\n","import { useState, useEffect } from 'react'\nimport type { RadioStation } from '@/lib/radio-stations'\nimport {\n  createMetadataPoller,\n  type TrackMetadata,\n} from '@/lib/radio-metadata-api'\nimport { addToHistory } from '@/lib/listening-history'\n\nexport function useRadioMetadata(\n  station: RadioStation | null,\n  isPlaying: boolean,\n) {\n  const [metadata, setMetadata] = useState<TrackMetadata | null>(null)\n  const [isLoading, setIsLoading] = useState(false)\n\n  useEffect(() => {\n    if (!station || !isPlaying) {\n      setMetadata(null)\n      return\n    }\n\n    setIsLoading(true)\n\n    // Start polling for metadata\n    const cleanup = createMetadataPoller(\n      station.id,\n      (newMetadata) => {\n        setMetadata(newMetadata)\n        setIsLoading(false)\n\n        // Add to listening history if we have valid metadata\n        if (\n          newMetadata &&\n          newMetadata.title &&\n          newMetadata.title !== 'En direct'\n        ) {\n          addToHistory(station.id, station.name, station.color, newMetadata)\n        }\n\n        // Update media session if available\n        if (newMetadata && 'mediaSession' in navigator) {\n          navigator.mediaSession.metadata = new MediaMetadata({\n            title: newMetadata.title || station.name,\n            artist: newMetadata.artist || newMetadata.show || 'En direct',\n            album: station.name,\n            artwork: newMetadata.coverArt\n              ? [\n                  {\n                    src: newMetadata.coverArt,\n                    sizes: '512x512',\n                    type: 'image/jpeg',\n                  },\n                ]\n              : [\n                  {\n                    src: station.logoUrl,\n                    sizes: '512x512',\n                    type: 'image/png',\n                  },\n                ],\n          })\n        }\n      },\n      15000, // Poll every 15 seconds\n    )\n\n    return cleanup\n  }, [station, isPlaying])\n\n  return { metadata, isLoading }\n}\n","export function registerServiceWorker() {\n  if ('serviceWorker' in navigator) {\n    window.addEventListener('load', () => {\n      navigator.serviceWorker\n        .register('/sw.js')\n        .then((registration) => {\n          console.log('Service Worker registered:', registration)\n\n          // Check for updates periodically\n          setInterval(() => {\n            void registration.update()\n          }, 60000) // Check every minute\n\n          // Handle updates\n          registration.addEventListener('updatefound', () => {\n            const newWorker = registration.installing\n            if (newWorker) {\n              newWorker.addEventListener('statechange', () => {\n                if (\n                  newWorker.state === 'installed' &&\n                  navigator.serviceWorker.controller\n                ) {\n                  // New service worker available\n                  console.log('New service worker available')\n                  // Optionally show a notification to the user\n                }\n              })\n            }\n          })\n        })\n        .catch((error) => {\n          console.error('Service Worker registration failed:', error)\n        })\n    })\n  }\n}\n","import { createFileRoute } from '@tanstack/react-router'\nimport { StationGrid } from '@/components/radio/station-grid'\nimport { ControlBar } from '@/components/radio/control-bar'\nimport { ListeningHistory } from '@/components/radio/listening-history'\nimport { useAudioPlayer } from '@/hooks/use-audio-player'\nimport { useRadioMetadata } from '@/hooks/use-radio-metadata'\nimport { registerServiceWorker } from '@/lib/register-sw'\nimport { getListeningHistory, clearHistory } from '@/lib/listening-history'\nimport type { RadioStation } from '@/lib/radio-stations'\nimport { useEffect, useState } from 'react'\n\nexport const Route = createFileRoute('/_public/')({\n  component: RadioApp,\n})\n\nfunction RadioApp() {\n  // Register service worker for PWA functionality\n  useEffect(() => {\n    registerServiceWorker()\n  }, [])\n\n  const [history, setHistory] = useState(() => getListeningHistory())\n\n  const {\n    currentStation,\n    playbackState,\n    volume,\n    isMuted,\n    error,\n    play,\n    pause,\n    resume,\n    setVolume,\n    toggleMute,\n    retry,\n  } = useAudioPlayer()\n\n  const { metadata, isLoading: metadataLoading } = useRadioMetadata(\n    currentStation,\n    playbackState === 'playing',\n  )\n\n  // Update history when metadata changes\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setHistory(getListeningHistory())\n    }, 5000) // Check for updates every 5 seconds\n\n    return () => clearInterval(interval)\n  }, [])\n\n  const handleStationSelect = async (station: RadioStation) => {\n    if (currentStation?.id === station.id) {\n      // Toggle play/pause for same station\n      if (playbackState === 'playing') {\n        pause()\n      } else if (playbackState === 'paused') {\n        resume()\n      } else {\n        await play(station)\n      }\n    } else {\n      // Play new station\n      await play(station)\n    }\n  }\n\n  const handlePlayPause = () => {\n    if (!currentStation) return\n\n    if (playbackState === 'playing') {\n      pause()\n    } else if (playbackState === 'paused') {\n      resume()\n    } else {\n      void play(currentStation)\n    }\n  }\n\n  const handleClearHistory = () => {\n    clearHistory()\n    setHistory([])\n  }\n\n  return (\n    <div className=\"relative min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950\">\n      {/* Animated background pattern */}\n      <div className=\"fixed inset-0 opacity-10\">\n        <div\n          className=\"absolute inset-0\"\n          style={{\n            backgroundImage: `radial-gradient(circle at 2px 2px, rgba(255,255,255,0.15) 1px, transparent 0)`,\n            backgroundSize: '40px 40px',\n          }}\n        />\n      </div>\n\n      {/* Noise texture overlay */}\n      <div\n        className=\"fixed inset-0 opacity-[0.015] mix-blend-overlay pointer-events-none\"\n        style={{\n          backgroundImage: `url(\"data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E\")`,\n        }}\n      />\n\n\n      {/* Main content */}\n      <main className=\"relative z-10 pb-32 pt-8\">\n        <div className=\"mx-auto max-w-7xl space-y-8 px-4\">\n          <StationGrid\n            currentStation={currentStation}\n            isPlaying={playbackState === 'playing'}\n            onStationSelect={handleStationSelect}\n          />\n\n          {/* Listening History */}\n          <ListeningHistory history={history} onClear={handleClearHistory} />\n        </div>\n      </main>\n\n      {/* Control bar */}\n      <ControlBar\n        station={currentStation}\n        playbackState={playbackState}\n        volume={volume}\n        isMuted={isMuted}\n        metadata={metadata}\n        metadataLoading={metadataLoading}\n        error={error}\n        onPlayPause={handlePlayPause}\n        onVolumeChange={setVolume}\n        onToggleMute={toggleMute}\n        onRetry={retry}\n      />\n    </div>\n  )\n}\n"],"mappings":"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"}