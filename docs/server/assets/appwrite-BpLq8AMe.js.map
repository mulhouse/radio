{"version":3,"file":"appwrite-BpLq8AMe.js","names":[],"sources":["../../../src/server/lib/appwrite.ts"],"sourcesContent":["/**\n * @imagine-readonly\n * These should only be imported in server-side actions (SSR, functions).\n */\n\nimport { Client, Account, Storage, Users } from 'node-appwrite'\n\nconst getAppwriteClientCredentials = () => {\n  const endpoint = process.env.APPWRITE_ENDPOINT\n  if (!endpoint) {\n    throw new Error('APPWRITE_ENDPOINT is not set')\n  }\n\n  const projectId = process.env.APPWRITE_PROJECT_ID\n  if (!projectId) {\n    throw new Error('APPWRITE_PROJECT_ID is not set')\n  }\n\n  const apiKey = process.env.APPWRITE_API_KEY\n  if (!apiKey) {\n    throw new Error('APPWRITE_API_KEY is not set')\n  }\n\n  return {\n    endpoint,\n    projectId,\n    apiKey,\n  }\n}\n\nexport async function createSessionClient(session: string) {\n  const { endpoint, projectId } = getAppwriteClientCredentials()\n  const client = new Client().setEndpoint(endpoint).setProject(projectId)\n  client.setSession(session)\n\n  return {\n    client: client,\n    account: new Account(client),\n    users: new Users(client),\n    storage: new Storage(client),\n  }\n}\n\nexport function createAdminClient(): {\n  client: Client\n  account: Account\n} {\n  const { endpoint, projectId, apiKey } = getAppwriteClientCredentials()\n  const client = new Client()\n    .setEndpoint(endpoint)\n    .setProject(projectId)\n    .setKey(apiKey)\n\n  return {\n    client: client,\n    account: new Account(client),\n  }\n}\n"],"mappings":";AAOA,IAAM,qCAAqC;CACzC,MAAM,WAAW,QAAQ,IAAI;AAC7B,KAAI,CAAC,SACH,OAAM,IAAI,MAAM,+BAA+B;CAGjD,MAAM,YAAY,QAAQ,IAAI;AAC9B,KAAI,CAAC,UACH,OAAM,IAAI,MAAM,iCAAiC;CAGnD,MAAM,SAAS,QAAQ,IAAI;AAC3B,KAAI,CAAC,OACH,OAAM,IAAI,MAAM,8BAA8B;AAGhD,QAAO;EACL;EACA;EACA;EACD;;AAGH,eAAsB,oBAAoB,SAAiB;CACzD,MAAM,EAAE,UAAU,cAAc,8BAA8B;CAC9D,MAAM,SAAS,IAAI,QAAQ,CAAC,YAAY,SAAS,CAAC,WAAW,UAAU;AACvE,QAAO,WAAW,QAAQ;AAE1B,QAAO;EACG;EACR,SAAS,IAAI,QAAQ,OAAO;EAC5B,OAAO,IAAI,MAAM,OAAO;EACxB,SAAS,IAAI,QAAQ,OAAO;EAC7B;;AAGH,SAAgB,oBAGd;CACA,MAAM,EAAE,UAAU,WAAW,WAAW,8BAA8B;CACtE,MAAM,SAAS,IAAI,QAAQ,CACxB,YAAY,SAAS,CACrB,WAAW,UAAU,CACrB,OAAO,OAAO;AAEjB,QAAO;EACG;EACR,SAAS,IAAI,QAAQ,OAAO;EAC7B"}