{"version":3,"file":"forgot-password-BD_cE_sv.js","names":["useMutation","Link","z","AuthCard","AuthForm","AuthField","forgotPasswordFn","useServerFn","useForm","zodResolver","useState","Alert","AlertDescription","CheckCircle2","Route","forgotPasswordSchema","object","email","string","ForgotPasswordPage","isSuccess","setIsSuccess","forgotPassword","form","resolver","defaultValues","forgotPasswordMutation","mutationFn","data","infer","onSuccess","reset","onError","error","status","message","console","setError","mutate","isPending","control","component"],"sources":["../../../src/routes/_auth/forgot-password.tsx?tsr-split=component"],"sourcesContent":["import { useMutation } from '@tanstack/react-query'\nimport { createFileRoute, Link } from '@tanstack/react-router'\nimport { z } from 'zod'\nimport { AuthCard } from '@/components/auth/auth-card'\nimport { AuthForm } from '@/components/auth/auth-form'\nimport { AuthField } from '@/components/auth/auth-field'\nimport { forgotPasswordFn } from '@/server/functions/auth'\nimport { useServerFn } from '@tanstack/react-start'\nimport { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { useState } from 'react'\nimport { Alert, AlertDescription } from '@/components/ui/alert'\nimport { CheckCircle2 } from 'lucide-react'\n\nexport const Route = createFileRoute('/_auth/forgot-password')({\n  component: ForgotPasswordPage,\n})\n\nconst forgotPasswordSchema = z.object({\n  email: z.string().email('Please enter a valid email address'),\n})\n\nfunction ForgotPasswordPage() {\n  const [isSuccess, setIsSuccess] = useState(false)\n  const forgotPassword = useServerFn(forgotPasswordFn)\n  const form = useForm({\n    resolver: zodResolver(forgotPasswordSchema),\n    defaultValues: {\n      email: '',\n    },\n  })\n\n  const forgotPasswordMutation = useMutation({\n    mutationFn: async (data: z.infer<typeof forgotPasswordSchema>) => {\n      await forgotPassword({ data })\n    },\n    onSuccess: () => {\n      setIsSuccess(true)\n      form.reset()\n    },\n    onError: (error: { status: number; message: string }) => {\n      console.error('Forgot password error:', error)\n      form.setError('root', {\n        message: error.message || 'Failed to send recovery email',\n      })\n    },\n  })\n\n  if (isSuccess) {\n    return (\n      <AuthCard\n        title=\"Check your email\"\n        description=\"We've sent you a password recovery link\"\n      >\n        <Alert className=\"border-green-500 bg-green-50 dark:bg-green-950\">\n          <CheckCircle2 className=\"h-4 w-4 text-green-600 dark:text-green-400\" />\n          <AlertDescription className=\"text-green-800 dark:text-green-200\">\n            If an account exists with that email, you'll receive a password\n            recovery link shortly. Please check your inbox and spam folder.\n          </AlertDescription>\n        </Alert>\n\n        <div className=\"text-center text-sm text-muted-foreground mt-4 space-x-1\">\n          <div className=\"inline-block\">Remember your password? </div>\n          <div className=\"inline-block\">\n            <Link\n              to=\"/sign-in\"\n              className=\"font-medium text-primary underline-offset-4 hover:underline\"\n            >\n              Sign in\n            </Link>\n          </div>\n        </div>\n      </AuthCard>\n    )\n  }\n\n  return (\n    <AuthCard\n      title=\"Forgot password\"\n      description=\"Enter your email address and we'll send you a recovery link\"\n    >\n      <AuthForm\n        schema={forgotPasswordSchema}\n        defaultValues={{\n          email: '',\n        }}\n        onSubmit={(data) => forgotPasswordMutation.mutate(data)}\n        submitText=\"Send recovery link\"\n        loadingText=\"Sending...\"\n        isLoading={forgotPasswordMutation.isPending}\n        form={form}\n      >\n        {(form) => (\n          <AuthField\n            control={form.control}\n            name=\"email\"\n            label=\"Email\"\n            placeholder=\"john@doe.com\"\n            type=\"email\"\n          />\n        )}\n      </AuthForm>\n\n      <div className=\"text-center text-sm text-muted-foreground mt-4 space-x-1\">\n        <div className=\"inline-block\">Remember your password? </div>\n        <div className=\"inline-block\">\n          <Link\n            to=\"/sign-in\"\n            className=\"font-medium text-primary underline-offset-4 hover:underline\"\n          >\n            Sign in\n          </Link>\n        </div>\n      </div>\n    </AuthCard>\n  )\n}\n"],"mappings":";;;;;;;;;;;;;;AAkBA,IAAMe,uBAAuBb,EAAEc,OAAO,EACpCC,OAAOf,EAAEgB,QAAQ,CAACD,MAAM,qCAAoC,EAC7D,CAAC;AAEF,SAASE,qBAAqB;CAC5B,MAAM,CAACC,WAAWC,gBAAgBX,SAAS,MAAM;CACjD,MAAMY,iBAAiBf,YAAYD,iBAAiB;CACpD,MAAMiB,OAAOf,QAAQ;EACnBgB,UAAUf,YAAYM,qBAAqB;EAC3CU,eAAe,EACbR,OAAO,IACT;EACD,CAAC;CAEF,MAAMS,yBAAyB1B,YAAY;EACzC2B,YAAY,OAAOC,SAA+C;AAChE,SAAMN,eAAe,EAAEM,MAAM,CAAC;;EAEhCE,iBAAiB;AACfT,gBAAa,KAAK;AAClBE,QAAKQ,OAAO;;EAEdC,UAAUC,UAA+C;AACvDG,WAAQH,MAAM,0BAA0BA,MAAM;AAC9CV,QAAKc,SAAS,QAAQ,EACpBF,SAASF,MAAME,WAAW,iCAC3B,CAAC;;EAEL,CAAC;AAEF,KAAIf,UACF,QACE,qBAAC,UAAA;EACC,OAAM;EACN,aAAY;aAEZ,qBAAC,OAAA;GAAM,WAAU;cACf,oBAAC,cAAA,EAAa,WAAU,8CAAA,CAA4C,EACpE,oBAAC,kBAAA;IAAiB,WAAU;cAAoC;KAG9C,CAAA;IACb,EAEP,qBAAC,OAAA;GAAI,WAAU;cACb,oBAAC,OAAA;IAAI,WAAU;cAAe;KAA6B,EAC3D,oBAAC,OAAA;IAAI,WAAU;cACb,oBAAC,MAAA;KACC,IAAG;KACH,WAAU;eAA6D;MAGnE;KACH,CAAA;IACF,CAAA;GACI;AAIf,QACE,qBAAC,UAAA;EACC,OAAM;EACN,aAAY;aAEZ,oBAAC,UAAA;GACC,QAAQL;GACR,eAAe,EACbE,OAAO,IACR;GACD,WAAWW,SAASF,uBAAuBY,OAAOV,KAAK;GACvD,YAAW;GACX,aAAY;GACZ,WAAWF,uBAAuBa;GAC5BhB;cAEJA,WACA,oBAAC,WAAA;IACC,SAASA,OAAKiB;IACd,MAAK;IACL,OAAM;IACN,aAAY;IACZ,MAAK;KAER;IACO,EAEV,qBAAC,OAAA;GAAI,WAAU;cACb,oBAAC,OAAA;IAAI,WAAU;cAAe;KAA6B,EAC3D,oBAAC,OAAA;IAAI,WAAU;cACb,oBAAC,MAAA;KACC,IAAG;KACH,WAAU;eAA6D;MAGnE;KACH,CAAA;IACF,CAAA;GACI"}